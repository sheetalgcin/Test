pipeline {
  options {
      timeout(time: 1, unit: 'HOURS')
  }
  agent {
    label 'docker'
  }
  stages {
    stage("Unit tests & linting") {
      agent {
        dockerfile {
          filename 'Docker'
          label 'docker'
          sh 'docker --version'
          sh 'python --version'
        }
      }
      steps {
        sh "pytest lib"
        sh 'robocop'
      }
    }
  }
}
